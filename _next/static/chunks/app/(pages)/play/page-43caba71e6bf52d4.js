(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{8738:function(e,t,s){Promise.resolve().then(s.bind(s,6018)),Promise.resolve().then(s.bind(s,4817))},2279:function(e,t,s){"use strict";var l=s(7437);t.Z=e=>{let{value:t,className:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"px-2 py-1 w-fit rounded bg-accent-600 font-medium italic "+s,children:(0,l.jsx)("span",{className:"drop-shadow-md",children:t})})})}},6018:function(e,t,s){"use strict";s.r(t);var l=s(7437),r=s(2265),n=s(1396),a=s.n(n);t.default=e=>{let{className:t}=e,[s,n]=(0,r.useState)([]),[c,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{fetch("https://kurskollen.se/sessions").then(e=>{if(e.ok)return e.json();throw console.log(e),Error("Failed to fetch sessions")}).catch(()=>[]).then(e=>{n(e),i(!1)}).catch(e=>{i(!1)})},[]);let d=(0,r.useCallback)(()=>c?null:0===s.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,className:"py-3",children:"No sessions found."})}):(0,l.jsx)(l.Fragment,{children:s.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border-b px-8 py-3",children:e.id}),(0,l.jsxs)("td",{className:"border-b px-8 py-3",children:[e.numPlayers,"/2"]}),(0,l.jsx)("td",{className:"border-b px-8 py-3",children:(0,l.jsx)(a(),{className:"bg-primary-500 hover:bg-primary-700 text-white font-bold py-1 px-3 rounded data-[disabled=true]:opacity-50 data-[disabled=true]:pointer-events-none w-fit","data-disabled":e.numPlayers>=2,href:"/game?id=".concat(e.id),children:"Join"})})]},e.id))}),[s,c]);return(0,l.jsxs)("div",{className:t+" text-center",children:[(0,l.jsx)("h1",{className:"font-extrabold text-2xl mb-2 flex justify-center",children:"Sessions"}),(0,l.jsxs)("table",{className:"table-fixed w-full mx-auto",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b",children:[(0,l.jsx)("th",{className:"px-4 py-2",children:"ID"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Players"}),(0,l.jsx)("th",{className:"px-4 py-2",children:"Join"})]})}),(0,l.jsx)("tbody",{children:d()})]})]})}},4817:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var l=s(7437),r=s(2265),n=s(3810),a=e=>{let{setUser:t}=e,[s,a]=(0,r.useState)(null),c=async e=>{if(e.preventDefault(),!e.currentTarget.username.value)return;let s=JSON.stringify({name:e.currentTarget.username.value});console.log("Sent ",s),fetch((0,n.t)("register"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include",body:s}).then(e=>{if(200===e.status)return e.json();a("Something went wrong")}).then(e=>{t(e)}).catch(e=>{console.error(e)})};return(0,l.jsxs)("div",{className:"w-full flex justify-center items-center flex-col my-8",children:[(0,l.jsxs)("p",{className:"mb-4 text-sm text-pretty max-w-md",children:["Register a username to play against other players.",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Note: "}),"Your account can be deleted at any time."]}),(0,l.jsxs)("form",{className:"text-white w-full max-w-xs",onSubmit:c,children:[(0,l.jsx)("input",{className:"border-2 border-gray-300 w-full bg-white text-background h-10 px-3 py-1 rounded-lg text-sm focus:outline-none",type:"text",name:"username",placeholder:"Username",autoComplete:"off",required:!0,maxLength:16,minLength:3,pattern:"^[a-zA-Z0-9_]+$"}),(0,l.jsx)("button",{className:"bg-primary-500 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded w-full flex-1 block mt-4",type:"submit",children:"Register"}),s&&(0,l.jsx)("p",{className:"text-accent-500 mt-2 w-full text-center text-xs",children:s})]})]})},c=s(2279),i=s(1396),d=s.n(i),o=()=>{let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),[o,x]=(0,r.useState)(0),u=async()=>{fetch((0,n.t)("user"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>200===e.status?e.json():null).then(e=>{t(e),i(!1)}).catch(e=>{console.error(e),t(null),i(!1)})};(0,r.useEffect)(()=>{u(),x(Math.floor(4294967296*Math.random()))},[]);let m=(0,r.useCallback)(()=>!e&&s?(0,l.jsx)("p",{children:"Loading user..."}):e?(0,l.jsxs)("div",{className:"w-full flex flex-col max-w-64",children:[(0,l.jsxs)("div",{className:"w-full px-4 pt-4 pb-6 rounded-lg border",children:[(0,l.jsx)("span",{className:"block text-center font-bold pb-4 pt-4 text-8xl",children:"\uD83C\uDFD3"}),(0,l.jsxs)("div",{className:"px-4 py-2 justify-center flex flex-col items-center w-full",children:[(0,l.jsx)("p",{className:"text-center font-bold text-xl mb-4 max-w-full overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.name}),(0,l.jsx)(c.Z,{value:e.elo,className:"mb-4"}),(0,l.jsx)("table",{className:"table-fixed w-full min-w-40 text-sm text-center mx-auto",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{className:"border-b w-full",children:[(0,l.jsx)("td",{className:"pt-3 px-2 text-left",children:"Wins"}),(0,l.jsx)("td",{className:"pt-3 px-2 text-right",children:0})]}),(0,l.jsxs)("tr",{className:"border-b w-full",children:[(0,l.jsx)("td",{className:"pt-3 px-2 text-left",children:"Losses"}),(0,l.jsx)("td",{className:"pt-3 px-2 text-right",children:0})]})]})})]})]}),(0,l.jsxs)("div",{className:"text-center flex gap-3 flex-col mt-8 mb-12",children:[(0,l.jsx)(d(),{className:"bg-primary-500 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded w-full flex-1 block",href:"/game?id=".concat(o),children:"Start Game"}),(0,l.jsx)(d(),{className:"bg-primary-500 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded w-full flex-1 block",href:"/game?id=".concat(o,"&ai=true"),children:"Play Against AI"})]})]}):(0,l.jsx)(a,{setUser:t}),[e,s,o]);return(0,l.jsx)("div",{className:"w-full flex flex-col justify-center",children:m()})}},3810:function(e,t,s){"use strict";s.d(t,{A:function(){return l},t:function(){return r}});let l=e=>"/pong/"+e,r=e=>"https://kurskollen.se/"+e}},function(e){e.O(0,[176,971,938,744],function(){return e(e.s=8738)}),_N_E=e.O()}]);